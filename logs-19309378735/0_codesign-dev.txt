2025-11-12T19:27:57.8879970Z Current runner version: '2.329.0'
2025-11-12T19:27:57.8902482Z ##[group]Runner Image Provisioner
2025-11-12T19:27:57.8903244Z Hosted Compute Agent
2025-11-12T19:27:57.8903737Z Version: 20251016.436
2025-11-12T19:27:57.8904341Z Commit: 8ab8ac8bfd662a3739dab9fe09456aba92132568
2025-11-12T19:27:57.8904995Z Build Date: 2025-10-15T20:44:12Z
2025-11-12T19:27:57.8905520Z ##[endgroup]
2025-11-12T19:27:57.8906013Z ##[group]Operating System
2025-11-12T19:27:57.8906562Z Microsoft Windows Server 2025
2025-11-12T19:27:57.8907053Z 10.0.26100
2025-11-12T19:27:57.8907496Z Datacenter
2025-11-12T19:27:57.8907927Z ##[endgroup]
2025-11-12T19:27:57.8908353Z ##[group]Runner Image
2025-11-12T19:27:57.8908844Z Image: windows-2025
2025-11-12T19:27:57.8909322Z Version: 20251102.77.1
2025-11-12T19:27:57.8910295Z Included Software: https://github.com/actions/runner-images/blob/win25/20251102.77/images/windows/Windows2025-Readme.md
2025-11-12T19:27:57.8912284Z Image Release: https://github.com/actions/runner-images/releases/tag/win25%2F20251102.77
2025-11-12T19:27:57.8913434Z ##[endgroup]
2025-11-12T19:27:57.8914512Z ##[group]GITHUB_TOKEN Permissions
2025-11-12T19:27:57.8916648Z Contents: read
2025-11-12T19:27:57.8917188Z Metadata: read
2025-11-12T19:27:57.8917658Z ##[endgroup]
2025-11-12T19:27:57.8919761Z Secret source: Actions
2025-11-12T19:27:57.8920487Z Prepare workflow directory
2025-11-12T19:27:57.9453938Z Prepare all required actions
2025-11-12T19:27:57.9491326Z Getting action download info
2025-11-12T19:27:58.2738089Z Download action repository 'actions/download-artifact@v4' (SHA:d3f86a106a0bac45b974a628896c90dbdf5c8093)
2025-11-12T19:27:59.0238815Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2025-11-12T19:27:59.3115776Z Complete job name: codesign-dev
2025-11-12T19:27:59.4345183Z ##[group]Run actions/download-artifact@v4
2025-11-12T19:27:59.4346543Z with:
2025-11-12T19:27:59.4347015Z   name: unsigned
2025-11-12T19:27:59.4347524Z   path: unsigned
2025-11-12T19:27:59.4348074Z   merge-multiple: false
2025-11-12T19:27:59.4348688Z   repository: svelderrainruiz/icon-editor-lab
2025-11-12T19:27:59.4349380Z   run-id: 19309378735
2025-11-12T19:27:59.4350134Z env:
2025-11-12T19:27:59.4351119Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:27:59.4351858Z   SIGN_ROOT: out
2025-11-12T19:27:59.4352365Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:27:59.4352890Z ##[endgroup]
2025-11-12T19:27:59.7121724Z Downloading single artifact
2025-11-12T19:27:59.9746193Z Preparing to download the following artifacts:
2025-11-12T19:27:59.9748819Z - unsigned (ID: 4547667543, Size: 329, Expected Digest: sha256:5ee197ff825c42de4f8de1b7a6decb950aa1655a9406476e33bd343d4740f95b)
2025-11-12T19:28:00.1463646Z Redirecting to blob download url: https://productionresultssa14.blob.core.windows.net/actions-results/42878e09-fc66-4e88-8e87-815225f027b9/workflow-job-run-60d40a69-3a7d-597c-b369-77d65ec42a60/artifacts/ceffe727ab2fa2c7c3322ee4a1aa0c2d2a4664836c2133df93dd15055bb617be.zip
2025-11-12T19:28:00.1466307Z Starting download of artifact to: D:\a\icon-editor-lab\icon-editor-lab\unsigned
2025-11-12T19:28:00.4746741Z (node:7464) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
2025-11-12T19:28:00.4748991Z (Use `node --trace-deprecation ...` to show where the warning was created)
2025-11-12T19:28:00.4827830Z SHA256 digest of downloaded artifact is 5ee197ff825c42de4f8de1b7a6decb950aa1655a9406476e33bd343d4740f95b
2025-11-12T19:28:00.4829790Z Artifact download completed successfully.
2025-11-12T19:28:00.4830631Z Total of 1 artifact(s) downloaded
2025-11-12T19:28:00.4839443Z Download artifact has finished successfully
2025-11-12T19:28:00.5282991Z ##[group]Run if ([string]::IsNullOrWhiteSpace('***
2025-11-12T19:28:00.5368227Z [36;1mif ([string]::IsNullOrWhiteSpace('***[0m
2025-11-12T19:28:00.5370236Z [36;1m') -or [string]::IsNullOrWhiteSpace('***[0m
2025-11-12T19:28:00.5373476Z [36;1m')) {[0m
2025-11-12T19:28:00.5374933Z [36;1m  throw 'Missing WIN_CODESIGN_PFX_B64 or WIN_CODESIGN_PFX_PASSWORD in environment codesign-dev.'[0m
2025-11-12T19:28:00.5376541Z [36;1m}[0m
2025-11-12T19:28:00.6001238Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:00.6002501Z env:
2025-11-12T19:28:00.6003306Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:00.6004304Z   SIGN_ROOT: out
2025-11-12T19:28:00.6005467Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:00.6006303Z ##[endgroup]
2025-11-12T19:28:05.7049219Z ##[group]Run [IO.File]::WriteAllBytes("$env:RUNNER_TEMP\\codesign.pfx", [Convert]::FromBase64String('***
2025-11-12T19:28:05.7074667Z [36;1m[IO.File]::WriteAllBytes("$env:RUNNER_TEMP\\codesign.pfx", [Convert]::FromBase64String('***[0m
2025-11-12T19:28:05.7075148Z [36;1m'))[0m
2025-11-12T19:28:05.7137137Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:05.7137495Z env:
2025-11-12T19:28:05.7137752Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:05.7138071Z   SIGN_ROOT: out
2025-11-12T19:28:05.7138321Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:05.7138542Z ##[endgroup]
2025-11-12T19:28:06.1382325Z ##[group]Run $signtoolCmd = Get-Command signtool.exe -ErrorAction SilentlyContinue
2025-11-12T19:28:06.1383014Z [36;1m$signtoolCmd = Get-Command signtool.exe -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:06.1383555Z [36;1mif (-not $signtoolCmd) { Write-Host 'signtool.exe not found; skipping PE signing.'; return }[0m
2025-11-12T19:28:06.1383989Z [36;1m$signtool = $signtoolCmd.Source[0m
2025-11-12T19:28:06.1384305Z [36;1m$tsa = 'http://timestamp.digicert.com'[0m
2025-11-12T19:28:06.1384772Z [36;1m$pe = Get-ChildItem unsigned -Include *.exe,*.dll,*.msi -Recurse -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:06.1385186Z [36;1mforeach ($f in $pe) {[0m
2025-11-12T19:28:06.1385832Z [36;1m  & $signtool sign /fd SHA256 /f "$env:RUNNER_TEMP\\codesign.pfx" /p '***[0m
2025-11-12T19:28:06.1386204Z [36;1m' /tr $tsa /td SHA256 $f.FullName[0m
2025-11-12T19:28:06.1386419Z [36;1m}[0m
2025-11-12T19:28:06.1443899Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:06.1444227Z env:
2025-11-12T19:28:06.1444424Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:06.1444726Z   SIGN_ROOT: out
2025-11-12T19:28:06.1444904Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:06.1445099Z ##[endgroup]
2025-11-12T19:28:06.9470816Z signtool.exe not found; skipping PE signing.
2025-11-12T19:28:07.0097269Z ##[group]Run if ($env:GITHUB_REPOSITORY -ne 'LabVIEW-Community-CI-CD/icon-editor-lab') {
2025-11-12T19:28:07.0097933Z [36;1mif ($env:GITHUB_REPOSITORY -ne 'LabVIEW-Community-CI-CD/icon-editor-lab') {[0m
2025-11-12T19:28:07.0098493Z [36;1m  Write-Host "Repo is $env:GITHUB_REPOSITORY (fork). Using ephemeral dev cert for script signing."[0m
2025-11-12T19:28:07.0099328Z [36;1m  $cert = New-SelfSignedCertificate -Subject 'CN=CI Ephemeral Code Signing' -Type CodeSigningCert -CertStoreLocation Cert:\CurrentUser\My -NotAfter (Get-Date).AddDays(14)[0m
2025-11-12T19:28:07.0099986Z [36;1m}[0m
2025-11-12T19:28:07.0100145Z [36;1melse {[0m
2025-11-12T19:28:07.0100303Z [36;1m  try {[0m
2025-11-12T19:28:07.0100684Z [36;1m    $flags = [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::UserKeySet `[0m
2025-11-12T19:28:07.0101329Z [36;1m           -bor [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::Exportable `[0m
2025-11-12T19:28:07.0101992Z [36;1m           -bor [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::PersistKeySet[0m
2025-11-12T19:28:07.0102643Z [36;1m    $cert = [System.Security.Cryptography.X509Certificates.X509Certificate2]::new([0m
2025-11-12T19:28:07.0103639Z [36;1m      "$env:RUNNER_TEMP\codesign.pfx",[0m
2025-11-12T19:28:07.0104324Z [36;1m      '***[0m
2025-11-12T19:28:07.0104531Z [36;1m',[0m
2025-11-12T19:28:07.0104686Z [36;1m      $flags)[0m
2025-11-12T19:28:07.0105519Z [36;1m  } catch {[0m
2025-11-12T19:28:07.0105928Z [36;1m    Write-Warning "Direct PFX load failed; attempting store import fallback. Error: $($_.Exception.Message)"[0m
2025-11-12T19:28:07.0106644Z [36;1m    $pwd = ConvertTo-SecureString '***[0m
2025-11-12T19:28:07.0106911Z [36;1m' -AsPlainText -Force[0m
2025-11-12T19:28:07.0107693Z [36;1m    $cert = Import-PfxCertificate -FilePath "$env:RUNNER_TEMP\codesign.pfx" -CertStoreLocation Cert:\CurrentUser\My***
2025-11-12T19:28:07.0108247Z [36;1m  }[0m
2025-11-12T19:28:07.0108443Z [36;1m}[0m
2025-11-12T19:28:07.0108671Z [36;1m$tsa = 'http://timestamp.digicert.com'[0m
2025-11-12T19:28:07.0109197Z [36;1m$scripts = Get-ChildItem unsigned -Include *.ps1,*.psm1 -Recurse -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:07.0109635Z [36;1mforeach ($s in $scripts) {[0m
2025-11-12T19:28:07.0110149Z [36;1m  Set-AuthenticodeSignature -FilePath $s.FullName -Certificate $cert -TimestampServer $tsa -HashAlgorithm SHA256 | Out-Null[0m
2025-11-12T19:28:07.0110654Z [36;1m}[0m
2025-11-12T19:28:07.0167885Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:07.0168196Z env:
2025-11-12T19:28:07.0168382Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:07.0168621Z   SIGN_ROOT: out
2025-11-12T19:28:07.0168793Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:07.0168973Z ##[endgroup]
2025-11-12T19:28:07.3189020Z Repo is svelderrainruiz/icon-editor-lab (fork). Using ephemeral dev cert for script signing.
2025-11-12T19:28:08.8549503Z ##[group]Run $signtoolCmd = Get-Command signtool.exe -ErrorAction SilentlyContinue
2025-11-12T19:28:08.8550505Z [36;1m$signtoolCmd = Get-Command signtool.exe -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:08.8551450Z [36;1mif (-not $signtoolCmd) { Write-Host 'signtool.exe not found; skipping PE verify.'; return }[0m
2025-11-12T19:28:08.8552265Z [36;1m$signtool = $signtoolCmd.Source[0m
2025-11-12T19:28:08.8552973Z [36;1m$pe = Get-ChildItem unsigned -Include *.exe,*.dll,*.msi -Recurse -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:08.8553849Z [36;1mforeach ($f in $pe) { & $signtool verify /pa $f.FullName }[0m
2025-11-12T19:28:08.8630830Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:08.8631139Z env:
2025-11-12T19:28:08.8631341Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:08.8631592Z   SIGN_ROOT: out
2025-11-12T19:28:08.8631763Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:08.8631943Z ##[endgroup]
2025-11-12T19:28:09.3244484Z signtool.exe not found; skipping PE verify.
2025-11-12T19:28:09.3950591Z ##[group]Run $expected = ''
2025-11-12T19:28:09.3950894Z [36;1m$expected = ''[0m
2025-11-12T19:28:09.3951097Z [36;1m$invalid = @()[0m
2025-11-12T19:28:09.3951482Z [36;1m$scripts = Get-ChildItem unsigned -Include *.ps1,*.psm1 -Recurse -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:09.3951899Z [36;1mforeach ($s in $scripts) {[0m
2025-11-12T19:28:09.3952169Z [36;1m  $sig = Get-AuthenticodeSignature $s.FullName[0m
2025-11-12T19:28:09.3952536Z [36;1m  if ($sig.Status -ne 'Valid') { $invalid += $s.FullName; continue }[0m
2025-11-12T19:28:09.3952951Z [36;1m  if ($expected -and $sig.SignerCertificate.Thumbprint -ne $expected) {[0m
2025-11-12T19:28:09.3953457Z [36;1m    throw "Unexpected signer for $($s.Name): $($sig.SignerCertificate.Thumbprint), expected $expected"[0m
2025-11-12T19:28:09.3953848Z [36;1m  }[0m
2025-11-12T19:28:09.3953991Z [36;1m}[0m
2025-11-12T19:28:09.3954153Z [36;1mif ($invalid.Count -gt 0) {[0m
2025-11-12T19:28:09.3954456Z [36;1m  'Scripts with invalid signatures:' | Write-Host[0m
2025-11-12T19:28:09.3954760Z [36;1m  $invalid | ForEach-Object { $_ | Write-Host }[0m
2025-11-12T19:28:09.3955026Z [36;1m  throw 'Invalid script signatures'[0m
2025-11-12T19:28:09.3955250Z [36;1m}[0m
2025-11-12T19:28:09.4011985Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:09.4012290Z env:
2025-11-12T19:28:09.4012494Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:09.4012902Z   SIGN_ROOT: out
2025-11-12T19:28:09.4013075Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:09.4013251Z ##[endgroup]
2025-11-12T19:28:09.8364783Z Scripts with invalid signatures:
2025-11-12T19:28:09.8395504Z D:\a\icon-editor-lab\icon-editor-lab\unsigned\Sample-Signed.ps1
2025-11-12T19:28:10.1290315Z [31;1mException: [0mD:\a\_temp\ee60168b-883c-4485-97a6-26d8c15434e5.ps1:15[0m
2025-11-12T19:28:10.1291130Z [31;1m[0m[36;1mLine |[0m
2025-11-12T19:28:10.1291749Z [31;1m[0m[36;1m[36;1m  15 | [0m   [36;1mthrow 'Invalid script signatures'[0m
2025-11-12T19:28:10.1292528Z [31;1m[0m[36;1m[36;1m[0m[36;1m[0m[36;1m     | [31;1m   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-11-12T19:28:10.1293302Z [31;1m[0m[36;1m[36;1m[0m[36;1m[0m[36;1m[31;1m[31;1m[36;1m     | [31;1mInvalid script signatures[0m
2025-11-12T19:28:10.1839861Z ##[error]Process completed with exit code 1.
2025-11-12T19:28:10.1993770Z ##[group]Run Remove-Item "$env:RUNNER_TEMP\\codesign.pfx" -Force -ErrorAction SilentlyContinue
2025-11-12T19:28:10.1994453Z [36;1mRemove-Item "$env:RUNNER_TEMP\\codesign.pfx" -Force -ErrorAction SilentlyContinue[0m
2025-11-12T19:28:10.2054520Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-11-12T19:28:10.2054822Z env:
2025-11-12T19:28:10.2055012Z   TSA_URL: http://timestamp.digicert.com
2025-11-12T19:28:10.2055263Z   SIGN_ROOT: out
2025-11-12T19:28:10.2055439Z   EXPECTED_THUMBPRINT: 
2025-11-12T19:28:10.2055623Z ##[endgroup]
2025-11-12T19:28:10.5461264Z Cleaning up orphan processes
